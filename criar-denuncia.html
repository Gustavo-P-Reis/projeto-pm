<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Raizia - Criar Denúncia</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./src/css/denuncia.css">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <button class="back-btn" onclick="window.location.href='index.html'">
          <i class="fas fa-arrow-left"></i>
        </button>
        <div class="header-content">
          <h1>Nova Denúncia</h1>
          <p>Reporte problemas com árvores que necessitam atenção</p>
        </div>
        <span class="badge-denuncia"
          ><i class="fas fa-exclamation-triangle"></i> Denúncia</span
        >
      </div>

      <div class="alert-warning">
        <i class="fas fa-info-circle"></i>
        <strong>Importante:</strong> Use denúncias apenas para problemas reais
        com árvores que necessitem intervenção. Para compartilhar fotos em
        geral, use a opção "Comunidade".
      </div>

      <form id="denunciaForm" onsubmit="handleSubmit(event)">
        <!-- Nome da Postagem -->
        <div class="form-group">
          <label for="postTitle"
            >Nome da Postagem <span class="required">*</span></label
          >
          <input
            type="text"
            id="postTitle"
            class="form-input"
            placeholder="Ex: Árvore Caída Bloqueando Calçada"
            required
          />
        </div>

        <!-- Sobre o Assunto -->
        <div class="form-group">
          <label for="postDescription"
            >Sobre o Assunto <span class="required">*</span></label
          >
          <textarea
            id="postDescription"
            class="form-textarea"
            placeholder="Descreva o problema em detalhes..."
            required
          ></textarea>
        </div>

        <!-- Nome da Pessoa (Auto-preenchido) -->
        <div class="form-group">
          <label for="userName">Nome do Denunciante</label>
          <input
            type="text"
            id="userName"
            class="form-input"
            value="João Silva"
            readonly
            style="background: #f0f0f0"
          />
        </div>

        <!-- Tipo de Problema -->
        <div class="form-group">
          <label>Tipo de Problema <span class="required">*</span></label>
          <div class="problem-types" id="problemTypes">
            <div
              class="problem-option"
              onclick="selectProblem(this, 'arvore-caida')"
            >
              <i class="fas fa-tree"></i>
              <span>Árvore Caída</span>
            </div>
            <div
              class="problem-option"
              onclick="selectProblem(this, 'arvore-doente')"
            >
              <i class="fas fa-virus"></i>
              <span>Árvore Doente</span>
            </div>
            <div
              class="problem-option"
              onclick="selectProblem(this, 'galhos-perigosos')"
            >
              <i class="fas fa-exclamation-triangle"></i>
              <span>Galhos Perigosos</span>
            </div>
            <div
              class="problem-option"
              onclick="selectProblem(this, 'raizes-danificadas')"
            >
              <i class="fas fa-project-diagram"></i>
              <span>Raízes Danificadas</span>
            </div>
            <div
              class="problem-option"
              onclick="selectProblem(this, 'necessita-poda')"
            >
              <i class="fas fa-cut"></i>
              <span>Necessita Poda</span>
            </div>
            <div class="problem-option" onclick="selectProblem(this, 'pragas')">
              <i class="fas fa-bug"></i>
              <span>Pragas</span>
            </div>
            <div
              class="problem-option"
              onclick="selectProblem(this, 'obstrucao')"
            >
              <i class="fas fa-road"></i>
              <span>Obstrução</span>
            </div>
            <div class="problem-option" onclick="selectProblem(this, 'outros')">
              <i class="fas fa-ellipsis-h"></i>
              <span>Outros</span>
            </div>
          </div>
          <input type="hidden" id="problemType" required />
        </div>

        <!-- Quando Ocorreu -->
        <div class="form-group">
          <label>Quando Ocorreu <span class="required">*</span></label>
          <div class="time-selector" id="timeSelector">
            <div class="time-option" onclick="selectTime(this, 'hoje')">
              Hoje
            </div>
            <div class="time-option" onclick="selectTime(this, 'ontem')">
              Ontem
            </div>
            <div class="time-option" onclick="selectTime(this, 'esta-semana')">
              Esta Semana
            </div>
            <div class="time-option" onclick="selectTime(this, 'mes-passado')">
              Mês Passado
            </div>
            <div class="time-option" onclick="selectTime(this, 'mais-de-mes')">
              Mais de 1 Mês
            </div>
            <div class="time-option" onclick="selectTime(this, 'nao-sei')">
              Não Sei
            </div>
          </div>
          <input type="hidden" id="timeOccurred" required />
        </div>

        <!-- Nível de Urgência -->
        <div class="form-group">
          <label>Nível de Urgência <span class="required">*</span></label>
          <div class="urgency-levels" id="urgencyLevels">
            <div
              class="urgency-option urgency-low"
              onclick="selectUrgency(this, 'baixa')"
            >
              <i class="fas fa-info-circle" style="color: #28a745"></i>
              <h4>Baixa</h4>
              <p>Não há risco imediato</p>
            </div>
            <div
              class="urgency-option urgency-medium"
              onclick="selectUrgency(this, 'media')"
            >
              <i class="fas fa-exclamation-circle" style="color: #ffc107"></i>
              <h4>Média</h4>
              <p>Requer atenção</p>
            </div>
            <div
              class="urgency-option urgency-high"
              onclick="selectUrgency(this, 'alta')"
            >
              <i class="fas fa-exclamation-triangle" style="color: #dc3545"></i>
              <h4>Alta</h4>
              <p>Urgente e perigoso</p>
            </div>
          </div>
          <input type="hidden" id="urgencyLevel" required />
        </div>

        <!-- Upload de Imagem -->
        <div class="form-group">
          <label>Imagem do Problema <span class="required">*</span></label>
          <div
            class="image-upload"
            onclick="document.getElementById('imageInput').click()"
          >
            <i class="fas fa-camera"></i>
            <p>Clique para fazer upload da imagem</p>
            <small>PNG, JPG ou JPEG (máx. 5MB)</small>
            <input
              type="file"
              id="imageInput"
              accept="image/*"
              style="display: none"
              onchange="previewImage(event)"
              required
            />
          </div>
          <div class="image-preview" id="imagePreview">
            <img id="previewImg" src="" alt="Preview" />
          </div>
        </div>

        <!-- Endereço -->
        <div class="form-group">
          <label>Endereço do Local <span class="required">*</span></label>
          <div class="address-grid">
            <input
              type="text"
              id="street"
              class="form-input full-width"
              placeholder="Rua/Avenida"
              required
            />
            <input
              type="text"
              id="number"
              class="form-input"
              placeholder="Número"
            />
            <input
              type="text"
              id="neighborhood"
              class="form-input"
              placeholder="Bairro"
              required
            />
            <input
              type="text"
              id="city"
              class="form-input"
              placeholder="Cidade"
              required
            />
            <input
              type="text"
              id="state"
              class="form-input"
              placeholder="Estado"
              required
            />
            <input
              type="text"
              id="postalCode"
              class="form-input"
              placeholder="CEP"
            />
            <input
              type="text"
              id="latitude"
              class="form-input"
              placeholder="Latitude"
              required
            />
            <input
              type="text"
              id="longitude"
              class="form-input"
              placeholder="Longitude"
              required
            />
          </div>
          <div class="map-container">
            <i class="fas fa-map-marked-alt"></i>
          </div>
        </div>

        <!-- Seção IA -->
        <div class="ai-section">
          <h3>
            <i class="fas fa-robot"></i>
            Gerar Modelo de Denúncia com IA
          </h3>
          <p style="color: #666; margin-bottom: 15px">
            Crie automaticamente um relatório detalhado da denúncia com base nas
            informações fornecidas.
          </p>
          <button type="button" class="generate-btn" onclick="generateReport()">
            <i class="fas fa-magic"></i>
            Gerar Modelo com IA
          </button>
          <div class="ai-output" id="aiOutput">
            <strong>Relatório Gerado:</strong><br /><br />
            <p id="reportContent"></p>
          </div>
          <a
            href="#"
            class="external-link"
            id="continueLink"
            style="display: none"
          >
            <i class="fas fa-external-link-alt"></i>
            Clique aqui para prosseguir com sua denúncia
          </a>
        </div>

        <!-- URL da Denúncia -->
        <div class="form-group">
          <label for="reportUrl"
            >Insira a URL da Denúncia <span class="required">*</span></label
          >
          <input
            type="url"
            id="reportUrl"
            class="form-input"
            placeholder="https://exemplo.com/denuncia/12345"
            required
          />
          <small style="color: #666; font-size: 13px">
            <i class="fas fa-info-circle"></i> Campo obrigatório - Link para o
            protocolo oficial da denúncia
          </small>
        </div>

        <!-- Workflow Status -->
        <div class="form-group">
          <label>Status do Workflow</label>
          <div class="workflow-status">
            <i class="fas fa-lock"></i>
            Não Resolvido (padrão - pode ser alterado no perfil após publicação)
          </div>
        </div>

        <!-- Botão Publicar -->
        <button type="submit" class="submit-btn">
          <i class="fas fa-bullhorn"></i> Publicar Denúncia
        </button>
      </form>
    </div>

    <script src="./src/js/criar-denuncia.js"></script>
  </body>
</html>
